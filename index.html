<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>平林的平常</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="平林的平常">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="平林的平常">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="平林的平常">
  
    <link rel="alternate" href="/atom.xml" title="平林的平常" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  

</head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class="active"
                 href="/index.html">Home</a></li>
        
          <li><a class=""
                 href="/archives/">Archives</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">平林的平常</h1>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          
  
    <article id="post-MySQL_5_表管理" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/06/MySQL_5_表管理/">MySQL_5_表管理</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/05/06/MySQL_5_表管理/" class="article-date"><time datetime="2018-05-06T01:27:47.000Z" itemprop="datePublished">2018-05-06</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="4-0-引言"><a href="#4-0-引言" class="headerlink" title="4.0 引言"></a>4.0 引言</h1><p>本章内容主要包括如何创建以及迁移表：<br>    • 克隆表<br>    • 表间拷贝<br>    • 使用临时表<br>    • 生成唯一表名<br>    • 确定一张表使用什么存储引擎，或者把一张表转换到其他存储引擎。<br>要创建并装载本章示例<br>% myslq cookbook &lt; mail.sql</p>
<h1 id="4-1-克隆表"><a href="#4-1-克隆表" class="headerlink" title="4.1 克隆表"></a>4.1 克隆表</h1><p>当你需要创建一个恰好与某个已有表结构一致的表。</p>
<p>使用create table ··· like 语句来克隆表结构；使用insert into ··· select 语句克隆部分或者全部表数据：<br>create table new_table LIKE original_table；</p>
<p>这样的到的新表和原表除了以下几点之外，在结构属性上一模一样：create table ····like 语句不克隆源表的外键定义，不克隆源表可能使用的data directory 和index directory 表选项。<br>如上方法生成的新表不包含任何数据，如果需要同时拷贝源表的数据，可以使用insert into ··· select 语句：<br>insert into new_table select * from original_table;</p>
<p>如果只想复制源表的部分数据到新表，可以在完成复制sql语句中加上相应的where子句来指定需要复制的行，例如，下面的语句根据mail表克隆了mail2，并将mail表中发送人为barb的数据行复制到mail2中：<br>mysql&gt; create table mail2 like mail;<br>Query OK, 0 rows affected (0.04 sec)</p>
<p>mysql&gt; insert into mail2 select * from mail where srcuser = ‘barb’;<br>Query OK, 3 rows affected (0.02 sec)<br>Records: 3  Duplicates: 0  Warnings: 0</p>
<p>mysql&gt; select * from mail2;<br>+———————+———+———+———+———+——-+<br>| t                   | srcuser | srchost | dstuser | dsthost | size  |<br>+———————+———+———+———+———+——-+<br>| 2014-05-11 10:15:08 | barb    | saturn  | tricia  | mars    | 58274 |<br>| 2014-05-12 18:59:18 | barb    | saturn  | tricia  | venus   |   271 |<br>| 2014-05-14 14:42:21 | barb    | venus   | barb    | venus   | 98151 |<br>+———————+———+———+———+———+——-+<br>3 rows in set (0.00 sec)</p>
<h1 id="4-2-将查询结果保存到表中"><a href="#4-2-将查询结果保存到表中" class="headerlink" title="4.2 将查询结果保存到表中"></a>4.2 将查询结果保存到表中</h1><p>问题：如何将select 语句查询的结果保存到另一张表中，而不是直接返回给用户。<br>解决方案：如果用来保存查询结果的表已经存在，可以使用 insert into ··· select 语句将查询结果插入表中，如果所要使用的表还不存在，需要使用 create table ···select 语句根据查询结果新建一张表。<br>讨论：mysql通常将select查询结果直接返回给用户，例如，当你在mysql客户端上执行了一条sql 语句，数据库服务器将处理结果返回给mysql客户端，紧接着，客户端将结果显示在屏幕上，也可以选择将select语句的查询结果保存在表中，这在有些情况下也是非常有用的，例如：<br>    • 用来复制一张表的全部或者部分数据，例如，在编写数据库相关的应用程序时，如果用户程序需要处理某张表，处于安全起见，那么可以复制该表用于开发和调试，这样不用担心程序开发过程中错误地修改了表；当所要处理的表数据量很大时，在开发过程中所用的临时表只需要复制实际使用表的部分数据，这样可以减少数据库交互所用的时间，从而提高开发效率。<br>    • 如果数据装载操作基于可能是错误的数据，可以将新的数据行暂时存到临时表中，然后对数据进行检查，并在必要的时候修改错误的数据，直到对所装载的数据满意之后，再将改行由临时表拷贝到主表中。<br>    • 有的应用程序同时维护着两个表，一个很大的存储表用于保存数据，和一个较小的工作表。应用程序频繁地将数据插入工作表中，并定时地将数据从工作表复制到存储表，同时清空工作表。<br>    • 如果你打算在同一个表重复多次数据摘要操作，首先查询一次摘要信息并保存到另一张临时表中，以后用这张临时表进行数据分析，这比每一次都在原始数据表上重复进行开销很大的摘要操作更高效。<br>本节讨论如何将查询结果保存在一张表中，在例子中使用src_tb1 来指代源表，从其中查询数据；使用dst_tb1指代目的表，将查询结果保存到其中。<br>如果用于保存查询结果的目的表已经存在，可以使用insert··· select 语句将查询结果复制到其中，假设dst_tb1中包含一个整数列i 和 一个字符串列s，下面的查询语句将src_tab1 表中val 和name 两列的所有行分别复制到 dst_tb1 的i 和 s两列中：<br>insert into dst_tb1 (i,s) select val, name from src_tb1;</p>
<p>在sql语句中，向目的表插入的列数与源表查询结果的列数必须相等。并且目的表和源表之间的列对应关系必须按照sql语句中的出现顺序决定，而不是又列名确定。将一个表的所有的列复制到另外一个表中一种特殊情况，此时可以忽略列名，sql语句可以简写如下：<br>insert into dst_tb1 select * from src_tb1</p>
<p>如果只要复制一行，在sql语句中加上一个where子句，对查找过程进行过程进行限制即可，如下：<br>inset into dst_tb1 select * from src_tb1<br>where val &gt; 100 and name like ‘A%’;</p>
<p>其中的select子句也可以和普通的查询语句一样，使用表达式来计算值，例如，下面的sql语句计算src_ta1 中每一个name 出现的次数，然后将name和出现的次数保存到dst_tb1中：<br>inset into dst_tb1(i,s) select count(*), name from src_tb1 group by name;</p>
<p>如果目的表事先不存在，就需要首先使用create table 语句创建一个，然后再使用insert···select语句向新创建的目的表插入查询结果。也可以使用一个sql语句完成：<br>create table···select,该语句直接根据查询结果创建目的表，如下语句创建了目的表dst_tb1,同时将src_tb1的内容复制到其中：<br>create table dst_tb1 select * from src_tb1;</p>
<p>Mysql 根据src_tb1 表查询结果中的列名、列数和列类型创建目的表dst_tb1.如果只需要从源表中复制部分列，则需要在select子句中加上where子句；如果需要创建一个空的目的表，只需要使用一个使得查询结果永远为空的where子句即可：<br>create table dst_tb1 select * from src_tb1 where 0;</p>
<p>如果只复制部分列，在需要在select 子句中指明需要复制的列名。例如，src_tb1 中有列a、b、c和d，你可以只复制b、和d两列目的表：<br>create table dst_tb1 select b,d from scr_tb1;</p>
<p>如果希望目的表中列的顺序和源表不同，则需要在select子句中显式的指明各列间顺序。如果源表中列a、b和c 的的顺序出现，而用户希望复制完成之后各列在目的表中出现顺序为c、a和b，可以使用如下语句：<br>create table dst_tb1 select c,a,b from src_tb1;</p>
<p>在create table 子句部分插入列定义（类似于创建表时的列定义），可以在目的表中加入查询结果中没有的列，如下语句，在dst_tb1 中创建了4列，其中a、b和c这3列来自源表查询结果，同时加上了定义为AUTO_INCREMENT的id列：</p>
<p>CREATE TABLE <code>cookbook</code>.<code>dst_tb1</code> (<br>    id INT NOT NULL AUTO_INCREMENT,<br>    PRIMARY KEY (id)<br>)<br>select a,b,c from src_tb1;<br>上列中，目的表dst_tb1中4列出现顺序为id、a、b、c。其中，a、b、c散列根据源表查询结果赋值，而id列值从1开始连续自加，为行序号。<br>如果查询子句中需要一个表达式计算某列值···<br>对于新创建的目的表MySQL不能确定某些列属性，例如列索引和默认值可以使用以下几个技巧···</p>
<h1 id="4-3使用临时表"><a href="#4-3使用临时表" class="headerlink" title="4.3使用临时表"></a>4.3使用临时表</h1><p>问题：如何创建仅供临时使用，并且自动删除的表<br>解决方案：创建TEMPORARY表，并在使用结束后让MySQL自动删除该表。<br>讨论：有的操作可能需要临时表，并在使用结束后删除，用户在使用完临时表之后，使用drop table 语句来删除该表，另一个选择是使用 create temporary table语句，这个sql语句的功能和create table 类似，只不过前者用来创建一张临时表，在和mysql服务器的连接关闭之后，创建的临时表被自动删除。</p>
<p>普通的建表语句：<br>create tempporary table tb1_name (··· 列定义···)<br>克隆表：<br>create tempporary table new_table like original_table;<br>根据查询结果建表：<br>create temporary  table tab1_name select ···</p>
<p>由于临时表与各个数据库连接相关的，所以不用的数据库连接可以创建同名的临时表，这些表之间不会相互影响，因此在此应用程序中需要创建临时表时，只需要保证临时表名在应用程序内部唯一即可，而不用关心所使用的临时表名在数据库服务器上是否唯一。<br>临时表另一个特性，临时表可以使用普通表的表名，这样做的结果是，在临时表的生命周期内，它将屏蔽与之同名的普通表。可以创建一个普通表的临时备份，对临时表可以做任意操作，而不影响真实数据，下面的delete语句从一个临时表中删除了一些行，但是对应的普通表没有任何影响。<br>mysql&gt; create temporary table mail select * from mail;<br>Query OK, 16 rows affected (0.02 sec)<br>Records: 16  Duplicates: 0  Warnings: 0</p>
<p>mysql&gt; select count(<em>) from mail;<br>+———-+<br>| count(</em>) |<br>+———-+<br>|       16 |<br>+———-+<br>1 row in set (0.00 sec)</p>
<p>mysql&gt; delete from mail;<br>Query OK, 16 rows affected (0.02 sec)</p>
<p>mysql&gt; select count(<em>) from mail;<br>+———-+<br>| count(</em>) |<br>+———-+<br>|        0 |<br>+———-+<br>1 row in set (0.00 sec)</p>
<p>mysql&gt; drop table mail;<br>Query OK, 0 rows affected (0.02 sec)</p>
<p>mysql&gt; select count(<em>) from mail;<br>+———-+<br>| count(</em>) |<br>+———-+</p>
<p>尽管使用 create temporary table 创建的临时表能带来很多便利，但有些情况也得小心使用：<br>    • 只有在最后一次使用后， 数据库才会自动删除临时表，如果一个临时表在一个数据库内连接多次重复使用，那么每一次重复使用之前先使用drop table 显示地删除该临时表（在一个数据库连接中，如果重复两次使用同一个表面创建临时表，而未删除第一次创建的临时表，将导致数据库错误）<br>    • 应用程序中使用一个与普通表同名的临时表时，应用程序只会对该临时表就行修改，但是如果数据库连接错误断开，而所使用的应用程序自动重新创建了数据库连接，那么以后对数据库的修改，都将直接用户普通表，而不是临时表（已经被自动删除）<br>    • 有的应用程序API提供数据库的持久连接或者连接池，可以使用这些技术保证临时表的持久性。因为这样的数据连接，在应用程序运行之后并不会断开，而会被其他的程序继续使用，在用户的应用程序关闭之后，就不能再操作所创建的临时表，也就意味着不被显式删除，它将一直存在于数据库。为此如果程序需要使用类似的数据库连接，并需要创建自己的临时表，比较明智的做法是在创建临时表之前执行下面的语句：<br>     drop temporary table if exists tb1_name<br>    temporary 关键字用在这里，可以避免错误的删除同名的普通表，例如，临时表tb1_name 已经被删除，而数据库中存在一个tb1_name 的普通表，如果不使用temporary关键字，那么普通表tb1_name 将被删除。</p>
<h1 id="4-4检查或者改变某个表的存储引擎"><a href="#4-4检查或者改变某个表的存储引擎" class="headerlink" title="4.4检查或者改变某个表的存储引擎"></a>4.4检查或者改变某个表的存储引擎</h1><p>问题： 检测一张表使用哪个存储引擎，以便你确定哪些引擎功能可用，或者，你发现另外的引擎具有的功能特性更适合你对某表的操作，因此你需要更改一张表所用的存储引擎。<br>解决方案：为了确定一张表所用的存储引擎，你可以使用很多语句中的任意一个，使用含有engine 子句的alter table 语句来更改表引擎。<br>讨论：MySQL支持多种存储引擎，每一种都有不同的特性，例如，InnoDB和BDB支持事务，而MyISAM不支持事务，如果你需要确定一张表是否支持事务的话，就确定它所使用的引擎。如果你需要在一个事务中使用该表，但是对应的引擎不支持，你可以将改变转换到一个支持事务的引擎上。<br>检测INFOMSTION_SCHEMA，或者show table status ,或者 show create table 语句，来确定一张表当前使用的引擎，如下获取mail 表的信息：</p>
<p>mysql&gt; show table status from cookbook where name = ‘mail’;<br>+——+——–+———+————+——+—————-+————-+—————–+————–+———–+—————-+———————+————-+————+—————–+———-+—————-+———+<br>| Name | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time | Check_time | Collation       | Checksum | Create_options | Comment |<br>+——+——–+———+————+——+—————-+————-+—————–+————–+———–+—————-+———————+————-+————+—————–+———-+—————-+———+<br>| mail | InnoDB |      10 | Dynamic    |   16 |           1024 |       16384 |               0 |        16384 |         0 |           NULL | 2018-04-28 13:23:17 | NULL        | NULL       | utf8_general_ci |     NULL |                |         |<br>+——+——–+———+————+——+—————-+————-+—————–+————–+———–+—————-+———————+————-+————+—————–+———-+—————-+———+<br>1 row in set (0.02 sec)</p>
<p>mysql&gt; show table status like ‘mail’;<br>+——+——–+———+————+——+—————-+————-+—————–+————–+———–+—————-+———————+————-+————+—————–+———-+—————-+———+<br>| Name | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time | Check_time | Collation       | Checksum | Create_options | Comment |<br>+——+——–+———+————+——+—————-+————-+—————–+————–+———–+—————-+———————+————-+————+—————–+———-+—————-+———+<br>| mail | InnoDB |      10 | Dynamic    |   16 |           1024 |       16384 |               0 |        16384 |         0 |           NULL | 2018-04-28 13:23:17 | NULL        | NULL       | utf8_general_ci |     NULL |                |         |<br>+——+——–+———+————+——+—————-+————-+—————–+————–+———–+—————-+———————+————-+————+—————–+———-+—————-+———+<br>1 row in set (0.00 sec)</p>
<p>mysql&gt; show create table mail;<br>+——-+————————————————————————————————————————————————————————————————————————————————————————————————-+<br>| Table | Create Table                                                                                                                                                                                                                                                                                    |<br>+——-+————————————————————————————————————————————————————————————————————————————————————————————————-+<br>| mail  | CREATE TABLE <code>mail</code> (<br>  <code>t</code> datetime DEFAULT NULL,<br>  <code>srcuser</code> varchar(8) DEFAULT NULL,<br>  <code>srchost</code> varchar(20) DEFAULT NULL,<br>  <code>dstuser</code> varchar(8) DEFAULT NULL,<br>  <code>dsthost</code> varchar(20) DEFAULT NULL,<br>  <code>size</code> bigint(20) DEFAULT NULL,<br>  KEY <code>t</code> (<code>t</code>)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 |<br>+——-+————————————————————————————————————————————————————————————————————————————————————————————————-+<br>1 row in set (0.00 sec)</p>
<p>使用alter table以及一个engine子句，来改变一张表所用的引擎，例如下面使mail表使用InnoDB引擎：<br>alter table mail engine = InnoDB；<br>改变一个很大的表所用的存储引擎可能会消耗很长时间，并花费大量CPU以及I/O资源。</p>
<h1 id="4-5生成唯一的表名"><a href="#4-5生成唯一的表名" class="headerlink" title="4.5生成唯一的表名"></a>4.5生成唯一的表名</h1><p>你需要创建一张表，并保证其表名不与现有表名重复（如何保证表名唯一？）</p>
<p>如果你创建一张temporary 表，就无所谓是非重复了，否则，就试着生成一个客户端唯一的值，并将该值合并到表名中。<br>讨论： MySQL 是一个多客户端服务器，因此一个创建临时表的脚本可能被多个客户端同时执行，你必须避免多个同时执行的脚本所创建的表名出现冲突。如果这个脚步使用create temporary table 来创建表，不会有问题，因为不同的客户端可以没有冲突地创建重名的临时表。</p>
<p>如果不想使用temporary 表，最好保证每个客户端使用脚步创建的表名都是唯一的，并删除不再继续使用的临时表。为了做到这一点，在表名中加入对于每一个脚本调用都唯一的值，一个timestamp值不能胜任，因为很有可能，两个脚本在同一时刻被调用，一个随机数可能会好点，例如，在JAVA中，你可以使用 java.util.random()类来创建表名</p>
<p>Random rand = new Random();<br>int n = rand.nexInt()<br>n = Math.abs(n);<br>String tblName = “tmp<em>tbl</em>“ + n;</p>
<p>不幸的是，随机数只在一定程度上避免了表名冲突，进程号（PID）是唯一值的一个更好来源，PID不断被利用，但对同一时刻的两个进程绝不会相同，因此对于一组正在执行的进程而言，给定PID值是肯定唯一的。你可以运用这点生成唯一表名：<br>perl：<br>Ruby：<br>PHP：<br>Python：<br>import os<br>tbl_name = “tmp<em>tbl</em>%d” % os.getpid()</p>
<p>就算你使用类似PID这样，对一个给定的脚本调用保证唯一的值来生成唯一的表名，所生成的表名仍有可以于现在的表名冲突，这样的情况可能出现在以前的一个脚本调用过程使用相同的PID，创建一个一样的表名，但这个进程在在删除所创建的临时表之外就崩溃了，另一个方面这样的表已经不再使用了，因为创建它的进程已经消失，这种情况如果这样的表确实存在，使用下面的语句安全的删除它；<br>drop  table if exists tbl_name;</p>
<p>然后你就可以继续创建新表了。<br>连接标识符是唯一值的另一个来源，MySQL重用这些值，但是两个同时存在的服务器连接具有不同ID，执行下面的语句，获取你的连接ID：<br>select cinnection_ID();</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/06/MySQL_5_表管理/" data-id="cjgu71mhb000agejrery1sc32" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      

    </footer>
  </div>
  
</article>



  
    <article id="post-MySQL_4_从表中查询" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/06/MySQL_4_从表中查询/">MySQL_4_从表中查询</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/05/06/MySQL_4_从表中查询/" class="article-date"><time datetime="2018-05-06T01:22:32.000Z" itemprop="datePublished">2018-05-06</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="3-0-引言"><a href="#3-0-引言" class="headerlink" title="3.0 引言"></a>3.0 引言</h1><p>select允许你对行查询的几个方面进行控制：<br>所要查询的表<br>所要查询的行和列<br>重命名查询结果列<br>对查询结果进行排序</p>
<h1 id="3-1-制定查询列-从指定列中查询"><a href="#3-1-制定查询列-从指定列中查询" class="headerlink" title="3.1 制定查询列/从指定列中查询"></a>3.1 制定查询列/从指定列中查询</h1><p>讨论 最简单的方法是使用 select <em> from tb_name 获取一个 数据库里的每一列信息，其中 “ </em> ” 说明对数据库中的所有列进行查询，但是查询结果不能安装用户指定的任意顺序显示，要达到这一目的，可以使用一下的语句指定查询列。<br>显示地查询列的另一个好处在于，在查询结果中可以只显示用户所关注的列，而不是显示每一个列的信息，例如：</p>
<h1 id="3-2-指定查询行"><a href="#3-2-指定查询行" class="headerlink" title="3.2 指定查询行"></a>3.2 指定查询行</h1><p>使用where语句设定查询条件，使得查询结果只包含符合查询条件的行，例如指定查询生活在某个城市的客户信息，或者状态为“finished”的任务。<br>where srchost = ‘venus’;<br>where srchost like ‘s%’;<br>where srchost = ‘barb’ and dstuser = ‘tricia’;</p>
<h1 id="3-3-格式化显示查询结果"><a href="#3-3-格式化显示查询结果" class="headerlink" title="3.3 格式化显示查询结果"></a>3.3 格式化显示查询结果</h1><p>问题：自定义查询结果（列名或者对应值）<br>使用AS name 子句来指定列别名</p>
<h1 id="3-4-使用别名来简化程序"><a href="#3-4-使用别名来简化程序" class="headerlink" title="3.4 使用别名来简化程序"></a>3.4 使用别名来简化程序</h1><h1 id="3-5-合并多列来构建复合值"><a href="#3-5-合并多列来构建复合值" class="headerlink" title="3.5 合并多列来构建复合值"></a>3.5 合并多列来构建复合值</h1><p>查询结果需要组合表中多个不同的列值来获得<br>使用concat（）函数，<br>mysql&gt; select DATE_FORMAT(t,’%M %e,%Y’) AS data_sent,<br>    -&gt; concat(srcuser, ‘@’, srchost) AS sender,<br>    -&gt; concat(datuser, ‘@’, dathost) AS recipient,<br>    -&gt; size from mail;</p>
<h1 id="3-6-where表达式中的别名"><a href="#3-6-where表达式中的别名" class="headerlink" title="3.6 where表达式中的别名"></a>3.6 where表达式中的别名</h1><p>mysql&gt; select t,srcuser, dstuser, size/1024 AS kilobytes from mail where size/1024 &gt; 500<br>    -&gt; \g</p>
<h1 id="3-7-调试比较表达式"><a href="#3-7-调试比较表达式" class="headerlink" title="3.7 调试比较表达式"></a>3.7 调试比较表达式</h1><p>mysql&gt; select * from mail where srcuser &lt; ‘c’ and size &gt; 5000;<br>+———————+———+———+———+———+——-+<br>| t                   | srcuser | srchost | dstuser | dsthost | size  |<br>+———————+———+———+———+———+——-+<br>| 2014-05-11 10:15:08 | barb    | saturn  | tricia  | mars    | 58274 |<br>| 2014-05-14 14:42:21 | barb    | venus   | barb    | venus   | 98151 |<br>+———————+———+———+———+———+——-+<br>2 rows in set (0.00 sec)</p>
<p>mysql&gt; select srcuser, srcuser &lt; ‘c’ ,size , size &gt; 5000 from mail;<br>+———+—————+———+————-+<br>| srcuser | srcuser &lt; ‘c’ | size    | size &gt; 5000 |<br>+———+—————+———+————-+<br>| barb    |             1 |   58274 |           1 |<br>| tricia  |             0 |  194925 |           1 |<br>| phil    |             0 |    1048 |           0 |<br>| barb    |             1 |     271 |           0 |<br>| gene    |             0 |    2291 |           0 |<br>| phil    |             0 |    5781 |           1 |<br>| barb    |             1 |   98151 |           1 |<br>| tricia  |             0 | 2394482 |           1 |<br>| gene    |             0 |    3824 |           0 |<br>| phil    |             0 |     978 |           0 |<br>| gene    |             0 |  998532 |           1 |<br>| gene    |             0 |    3856 |           0 |<br>| gene    |             0 |     613 |           0 |<br>| phil    |             0 |   10294 |           1 |<br>| phil    |             0 |     873 |           0 |<br>| gene    |             0 |   23992 |           1 |<br>+———+—————+———+————-+<br>16 rows in set (0.00 sec)</p>
<h1 id="3-8-使查询结果唯一化"><a href="#3-8-使查询结果唯一化" class="headerlink" title="3.8 使查询结果唯一化"></a>3.8 使查询结果唯一化</h1><p>mysql&gt; select srcuser from mail;<br>+———+<br>| srcuser |<br>+———+<br>| barb    |<br>| tricia  |<br>| phil    |<br>| barb    |<br>| gene    |<br>| phil    |<br>| barb    |<br>| tricia  |<br>| gene    |<br>| phil    |<br>| gene    |<br>| gene    |<br>| gene    |<br>| phil    |<br>| phil    |<br>| gene    |<br>+———+<br>16 rows in set (0.00 sec)</p>
<p>mysql&gt; select distinct srcuser from mail;<br>+———+<br>| srcuser |<br>+———+<br>| barb    |<br>| tricia  |<br>| phil    |<br>| gene    |<br>+———+<br>4 rows in set (0.01 sec)</p>
<h1 id="3-9-如何处理-null值"><a href="#3-9-如何处理-null值" class="headerlink" title="3.9 如何处理 null值"></a>3.9 如何处理 null值</h1><p>如何将列值与NULL值比较呢<br>选择使用合适的比较操作符： is null  、is not null或者 &lt;=&gt;</p>
<p>没有样本表暂时跳过</p>
<h1 id="3-10-在用户程序中使用NULL-作为比较参数"><a href="#3-10-在用户程序中使用NULL-作为比较参数" class="headerlink" title="3.10 在用户程序中使用NULL 作为比较参数"></a>3.10 在用户程序中使用NULL 作为比较参数</h1><p>···从另一个角度来避免这个问题，在定义数据库时，如果不是特别需要，就不允许列值为NULL。<br>3.11 结果集序列<br>在查询语句中使用一个ORDER BY 子句对查询结果进行排序，可以在order by子句中指定数据库的一列或者多列作为排序依据，<br>mysql&gt; select * from mail where size &gt; 5000 order by size ;<br>+———————+———+———+———+———+———+<br>| t                   | srcuser | srchost | dstuser | dsthost | size    |<br>+———————+———+———+———+———+———+<br>| 2014-05-14 11:52:17 | phil    | mars    | tricia  | saturn  |    5781 |<br>| 2014-05-16 23:04:19 | phil    | venus   | barb    | venus   |   10294 |<br>| 2014-05-19 22:21:51 | gene    | saturn  | gene    | venus   |   23992 |<br>| 2014-05-11 10:15:08 | barb    | saturn  | tricia  | mars    |   58274 |<br>| 2014-05-14 14:42:21 | barb    | venus   | barb    | venus   |   98151 |<br>| 2014-05-12 12:48:13 | tricia  | mars    | gene    | venus   |  194925 |<br>| 2014-05-15 10:25:52 | gene    | mars    | tricia  | saturn  |  998532 |<br>| 2014-05-14 17:03:01 | tricia  | saturn  | phil    | venus   | 2394482 |<br>+———————+———+———+———+———+———+<br>8 rows in set (0.00 sec)</p>
<p>在order by 子句的最后，即定义的排序依据的列名之后加上关键字DESC使查询结果按逆序排序。</p>
<h1 id="3-12-使用视图来简化查询"><a href="#3-12-使用视图来简化查询" class="headerlink" title="3.12 使用视图来简化查询"></a>3.12 使用视图来简化查询</h1><p>mysql&gt; select<br>    -&gt; date_format(t,’%M %e %Y’) as date_sent,<br>    -&gt; concat(srcuser,’@’,srchost) as sender,<br>    -&gt; concat(dstuser,’@’,dsthost) as recipient,<br>    -&gt; size from mail;<br>+————-+—————+—————+———+<br>| date_sent   | sender        | recipient     | size    |<br>+————-+—————+—————+———+<br>| May 11 2014 | barb@saturn   | tricia@mars   |   58274 |<br>| May 12 2014 | tricia@mars   | gene@venus    |  194925 |<br>| May 12 2014 | phil@mars     | phil@saturn   |    1048 |<br>| May 12 2014 | barb@saturn   | tricia@venus  |     271 |<br>| May 14 2014 | gene@venus    | barb@mars     |    2291 |<br>| May 14 2014 | phil@mars     | tricia@saturn |    5781 |<br>| May 14 2014 | barb@venus    | barb@venus    |   98151 |<br>| May 14 2014 | tricia@saturn | phil@venus    | 2394482 |<br>| May 15 2014 | gene@mars     | gene@saturn   |    3824 |<br>| May 15 2014 | phil@venus    | phil@venus    |     978 |<br>| May 15 2014 | gene@mars     | tricia@saturn |  998532 |<br>| May 15 2014 | gene@saturn   | gene@mars     |    3856 |<br>| May 16 2014 | gene@venus    | barb@mars     |     613 |<br>| May 16 2014 | phil@venus    | barb@venus    |   10294 |<br>| May 19 2014 | phil@mars     | tricia@saturn |     873 |<br>| May 19 2014 | gene@saturn   | gene@venus    |   23992 |<br>+————-+—————+—————+———+<br>16 rows in set (0.00 sec)</p>
<p> 当需要频繁使用类似上例的查询时，就需要每次都在查询语句中重复写入类似复杂的运算表达式，在这样的情况下，就可以使用视图来简化查询语句，视图是一个虚拟的数据库，它并不包含任何实际的数据，实际上，一个视图可以看作一个特定的select语句，下面的视图mail_view 与定义它的select语句是等价的：<br>mysql&gt; create view mail_view as<br>    -&gt; select<br>    -&gt; date_format(t, ‘%M %e %Y’) as date_sent,<br>    -&gt; concat(srcuser, ‘@’, srchost) as sender,<br>    -&gt; concat(dstuser, ‘@’, dsthost) as recipient,<br>    -&gt; size from mail;<br>Query OK, 0 rows affected (0.02 sec)</p>
<p>mysql&gt; select date_sent, sender, size from mail_view<br>    -&gt; where size &gt; 100000 order by size;<br>+————-+—————+———+<br>| date_sent   | sender        | size    |<br>+————-+—————+———+<br>| May 12 2014 | tricia@mars   |  194925 |<br>| May 15 2014 | gene@mars     |  998532 |<br>| May 14 2014 | tricia@saturn | 2394482 |<br>+————-+—————+———+<br>3 rows in set (0.00 sec)</p>
<h1 id="3-13-多表查询"><a href="#3-13-多表查询" class="headerlink" title="3.13 多表查询"></a>3.13 多表查询</h1><p>需要从多个表中查询数据<br>使用联合(join)操作,或者使用子查询<br>没有相应样本表</p>
<h1 id="3-14-从查询结果集头或者尾取出部分行"><a href="#3-14-从查询结果集头或者尾取出部分行" class="headerlink" title="3.14 从查询结果集头或者尾取出部分行"></a>3.14 从查询结果集头或者尾取出部分行</h1><p>问题：如何才能只显示查询结果的部分行，例如第一行或者最后5行<br>解决方案： 使用limit 子句，并且经常要跟order by 子句配合使用<br>LIMIT子句主要用于以下类型的查询：<br>当需要查询的结果是：第一个或者最后一个，最大或者最小，最新或者最旧，最便宜或者最贵。<br>当查询结果行数较多，将查询结果划分小块，每次只取出其中一块返回显示给用户，这种技术在WEB中比较常见：将一个跨越多个页面的查询结果划分为多次显示，每次显示一个页面。每次显示查询结果的一部分，可以使查询结果更具有可读性<br>mysql&gt; select * from profile order by birth limit 1;<br>+—-+——–+————+——-+—————-+——+<br>| id | name   | birth      | color | foods          | cats |<br>+—-+——–+————+——-+—————-+——+<br>|  7 | Joanna | 1952-08-20 | green | lutefisk,fadge |    0 |<br>+—-+——–+————+——-+—————-+——+<br>1 row in set (0.00 sec)</p>
<p>当查询结果无序的，所以从查询结果中取出头N行可能无意义，更常见的结果首先使用order by 子句对查询结果进行排序，然后再使用limit子句从查询结果中取出最大或者最小特征的行，<br>例如<br>mysql&gt; select * from profile order by birth limit 1;<br>+—-+——–+————+——-+—————-+——+<br>| id | name   | birth      | color | foods          | cats |<br>+—-+——–+————+——-+—————-+——+<br>|  7 | Joanna | 1952-08-20 | green | lutefisk,fadge |    0 |<br>+—-+——–+————+——-+—————-+——+<br>1 row in set (0.00 sec)</p>
<p>如果要获取查询结果的最后N行，则可以对查询结果进行逆序排序，例如需要查找最晚出生的人，查询语句类似上面，不同的是对查询结果按照birth列值递减排序.<br>mysql&gt; select * from profile order by birth desc limit 1;<br>+—-+——-+————+——-+—————+——+<br>| id | name  | birth      | color | foods         | cats |<br>+—-+——-+————+——-+—————+——+<br>|  3 | Ralph | 1973-11-02 | red   | eggroll,pizza |    4 |<br>+—-+——-+————+——-+—————+——+<br>1 row in set (0.00 sec)</p>
<p>按照历年内最早或者最迟的出生日，根据birth值的月份和日期进行排序，则可以可以将查询结果先根据生日的月和日进行排序：<br>mysql&gt; select name , date_format(birth, ‘%m-%d’) as birthday<br>    -&gt; from profile order by birthday limit 1;<br>+——-+———-+<br>| name  | birthday |<br>+——-+———-+<br>| Henry | 02-14    |<br>+——-+———-+<br>1 row in set (0.00 sec)</p>
<p>如果不使用Limit子句，而是人为的忽略除了第一行外的查询结果，用户也一样可以得到需要的信息，使用limit子句的优势在于，数据库服务器只通过网络向用户返回查询结果中的一行，而不会返回其他行，这样避免了网络带宽的浪费，同是提高了用户程序的运行效率。<br>参考<br>limit同样应用于delete 和 update 语句，对所要删除或者修改的行进行限制，这种情况，limit子句和where子句组合使用可以有更好的效果，例如：一个数据库表中有5行一样的数据，其中4行是冗余的，此时可以在delect语句中使用一个where子句找到这5行，然后通过语句的最后加上limit 4 删除冗余的4行，这样可以保持数据库信息的唯一性。</p>
<h1 id="3-15-在结果集中间选取部分行"><a href="#3-15-在结果集中间选取部分行" class="headerlink" title="3.15 在结果集中间选取部分行"></a>3.15 在结果集中间选取部分行</h1><p>Limit 子句可以接收两个参数，使用户可以获取一个查询结果中的任意部分行，这种情况limit两个参数分别指定了从查询结果的第几行开始返回，以及一共返回多少行。<br>mysql&gt; select * from profile order by birth limit 2,1;<br>+—-+———+————+——-+—————+——+<br>| id | name    | birth      | color | foods         | cats |<br>+—-+———+————+——-+—————+——+<br>|  4 | Lothair | 1963-07-04 | blue  | burrito,curry |    5 |<br>+—-+———+————+——-+—————+——+<br>1 row in set (0.00 sec)</p>
<h1 id="3-16-选择合适的LIMIT参数"><a href="#3-16-选择合适的LIMIT参数" class="headerlink" title="3.16 选择合适的LIMIT参数"></a>3.16 选择合适的LIMIT参数</h1><p>样本表未特添加成功，暂时跳过</p>
<h1 id="3-17-当LIMIT需要”错误”的排列顺序时做什么"><a href="#3-17-当LIMIT需要”错误”的排列顺序时做什么" class="headerlink" title="3.17 当LIMIT需要”错误”的排列顺序时做什么"></a>3.17 当LIMIT需要”错误”的排列顺序时做什么</h1><p>问题：limit 和 用于排序的 order by 配合使用，通常在查询中发挥作用，但是有时order by 子句得到的排序结果和你想要的结果相反。</p>
<p>解决方案： 在子查询中使用limit子句取得所需的行，然后在外层查询中对子结果进行排序。</p>
<p>讨论<br>如果希望得一个查询结果的最后4行记录，只需要将查询结果按照降序排列，然后使用limit 4 子句即可。<br>如从profile表中查询最晚出生的4个人：<br>mysql&gt; select name, birth from profile order by birth desc limit 4;<br>+——-+————+<br>| name  | birth      |<br>+——-+————+<br>| Ralph | 1973-11-02 |<br>| Sybil | 1970-04-13 |<br>| Nancy | 1969-09-30 |<br>| Aaron | 1968-09-17 |<br>+——-+————+<br>4 rows in set (0.00 sec)</p>
<p>这样的查询方式，要求首先对查询结果进行降序排列，最后的查询结果也按照降序返回，如果要求结果按照升序排列如何处理？<br>方法一：使用两个查询语句。首先使用count（） 函数计算表中一共记录了几行数据。<br>mysql&gt; select count(<em>) from profile;<br>+———-+<br>| count(</em>) |<br>+———-+<br>|        8 |<br>+———-+<br>1 row in set (0.00 sec)</p>
<p>然后，使用升序来排列查询结果，并使用带两个参数的LIMIT子句从排序结果中取出所需行。<br>mysql&gt; select name, birth from profile order by birth limit 4, 4;<br>+——-+————+<br>| name  | birth      |<br>+——-+————+<br>| Aaron | 1968-09-17 |<br>| Nancy | 1969-09-30 |<br>| Sybil | 1970-04-13 |<br>| Ralph | 1973-11-02 |<br>+——-+————+<br>4 rows in set (0.00 sec)</p>
<p>这样的解决方法要求计算表中的总行数，然后还要计算从第几行开始返回结果，用户可能不想这么做，所以有了第二种方法：首先在一个子查询中使用limit子句取出所需的行，然后在外层查询中对该结果的排序，并返回用户。如下：<br>mysql&gt; select *from                                                                -&gt; (select name ,birth from profile order by birth desc limit 4) AS t<br>    -&gt; order by birth;<br>+——-+————+<br>| name  | birth      |<br>+——-+————+<br>| Aaron | 1968-09-17 |<br>| Nancy | 1969-09-30 |<br>| Sybil | 1970-04-13 |<br>| Ralph | 1973-11-02 |<br>+——-+————+<br>4 rows in set (0.00 sec)<br>(from : 后面加了空格再换行，粘贴后变的不规则)<br>在查询语句中，from 子句后面必须是表名，因此在上例中使用AS t 对子查询结果赋予别名，作为from的一个临时表名。</p>
<h1 id="3-18从表达式中计算LIMIT值"><a href="#3-18从表达式中计算LIMIT值" class="headerlink" title="3.18从表达式中计算LIMIT值"></a>3.18从表达式中计算LIMIT值</h1><p>如何使用表达式计算LIMIT子句所使用的参数？<br>实际上，sql语句中，limit子句只能直接以数字作为参数，并不能使用表达式作为limit子句的参数，除非在应用程序中，使用用户程序语句计算出limit参数，然后再将结果插入到sql语句中。</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/06/MySQL_4_从表中查询/" data-id="cjgu71mh80008gejr5ur1rbq5" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      

    </footer>
  </div>
  
</article>



  
    <article id="post-MySQL_3_2_使用Mysql客户端" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/MySQL_3_2_使用Mysql客户端/">MySQL_3_2_使用MySQL客户端</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/02/25/MySQL_3_2_使用Mysql客户端/" class="article-date"><time datetime="2018-02-25T08:37:22.000Z" itemprop="datePublished">2018-02-25</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h6 id="1-16-预防查询输出超出屏幕"><a href="#1-16-预防查询输出超出屏幕" class="headerlink" title="1.16 预防查询输出超出屏幕"></a>1.16 预防查询输出超出屏幕</h6><h6 id="1-17-发送查询输出到文件或程序"><a href="#1-17-发送查询输出到文件或程序" class="headerlink" title="1.17 发送查询输出到文件或程序"></a>1.17 发送查询输出到文件或程序</h6><p>让mysql输出到其他地方而非屏幕，重定向mysql的输出，或者使用管道</p>
<p>% mysql cookbook &lt; inputfile  &gt; outputfile</p>
<h6 id="1-18-选择表格或制表符定界的查询输出格式"><a href="#1-18-选择表格或制表符定界的查询输出格式" class="headerlink" title="1.18 选择表格或制表符定界的查询输出格式"></a>1.18 选择表格或制表符定界的查询输出格式</h6><p>问题：当你想获得制表符定界的输出时，mysql却生成表格式的输出，或者相反，<br>解决方案 ： 使用合适的命令选项来显示需要的格式<br>使用-t 或者（–table）选项来生成更具可读性的表格输出：<br>% mysql -t cookbook &lt; inputfile | lpr<br>% mysql -t cookbook &lt; inputfile | mail paul</p>
<p>反向操作是在交互模式下生成批量输出，达到这点使用-B（或–batch）</p>
<h6 id="1-19-指定任意的输出列分隔符"><a href="#1-19-指定任意的输出列分隔符" class="headerlink" title="1.19 指定任意的输出列分隔符"></a>1.19 指定任意的输出列分隔符</h6><p>问题： 你想mysql使用除了制表符外的定界符来生成语句输出<br>解决方案：mysql 自身并未提供设置输出定界符的功能，但你可以对mysql输出进行加工来重新格式化。</p>
<h6 id="1-20-生成HTML或XML输出"><a href="#1-20-生成HTML或XML输出" class="headerlink" title="1.20 生成HTML或XML输出"></a>1.20 生成HTML或XML输出</h6><p>将查询结果转化成HTML或XML<br>使用 mysql -H 或 mysql -X</p>
<p>例如：<br>% mysql  -e “select <em> from limbs where legs=0” cookbook<br>% mysql -H -e “select </em> from limbs where legs=0” cookbook</p>
<h6 id="1-21-在查询输出中禁止列头部"><a href="#1-21-在查询输出中禁止列头部" class="headerlink" title="1.21 在查询输出中禁止列头部"></a>1.21 在查询输出中禁止列头部</h6><p>% mysql -e “select arms from limbs” cookbook | sumarize<br>要创建仅包含数据值的输出，就要  –skip-column-names 选项禁止列头部行：<br>% mysql  –skip-column-names -e “select arms from limbs” cookbook | sumarize<br>你也可通过两次指定“silent” 选项（-s 或 –silent）来达到和–skip-coumn-names 同等的效果：<br>% mysql -ss -e “select arms from limbs” cookbook | sumarize</p>
<h6 id="1-22-使长输出行更具可读性"><a href="#1-22-使长输出行更具可读性" class="headerlink" title="1.22 使长输出行更具可读性"></a>1.22 使长输出行更具可读性</h6><p>问题：当你的一个查询生成了很长的输出行，它杂乱无章的出现在你的屏幕上<br>解决方案：使用垂直的输出格式<br>mysql&gt; show full columns from limbs;<br>+——-+————-+—————–+——+—–+———+——-+———————————+———+<br>| Field | Type        | Collation       | Null | Key | Default | Extra | Privileges                      | Comment |<br>+——-+————-+—————–+——+—–+———+——-+———————————+———+<br>| thing | varchar(20) | utf8_general_ci | YES  |     | NULL    |       | select,insert,update,references |         |<br>| legs  | int(11)     | NULL            | YES  |     | NULL    |       | select,insert,update,references |         |<br>| arms  | int(11)     | NULL            | YES  |     | NULL    |       | select,insert,update,references |         |<br>+——-+————-+—————–+——+—–+———+——-+———————————+———+</p>
<p>为避免此问题，将每列值显示在单独的一行来生成“垂直的”输出。通过\G 而不是用字符a；或\g 来终止一条语句来实现的。<br>用垂直格式输出样式：<br>mysql&gt; show full columns from limbs\G;<br><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong> 1. row <strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong><br>     Field: thing<br>      Type: varchar(20)<br> Collation: utf8_general_ci<br>      Null: YES<br>       Key:<br>   Default: NULL<br>     Extra:<br>Privileges: select,insert,update,references<br>   Comment:<br><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong> 2. row <strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong><br>     Field: legs<br>      Type: int(11)<br> Collation: NULL<br>      Null: YES<br>       Key:<br>   Default: NULL<br>     Extra:<br>Privileges: select,insert,update,references<br>   Comment:<br><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong> 3. row <strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong><br>     Field: arms<br>      Type: int(11)<br> Collation: NULL<br>      Null: YES<br>       Key:<br>   Default: NULL<br>     Extra:<br>Privileges: select,insert,update,references<br>   Comment:<br>3 rows in set (0.00 sec)</p>
<p>ERROR:<br>No query specified</p>
<h6 id="1-23控制mysql的繁冗级别"><a href="#1-23控制mysql的繁冗级别" class="headerlink" title="1.23控制mysql的繁冗级别"></a>1.23控制mysql的繁冗级别</h6><p>问题：你需要mysql产生更多的输出，或者相反<br>解决方案： 使用-v 或 -s 选项来获取更多或者更少<br>% echo “select now()” | mysql -v<br>% echo “select now()” | mysql -vv<br>% echo “select now()” | mysql -vvv<br>-v 和–verbose 相对的是 -s 和–silent ，它们也可以多次使用来达到叠加的效果</p>
<h6 id="1-24记录交互式的mysql回话"><a href="#1-24记录交互式的mysql回话" class="headerlink" title="1.24记录交互式的mysql回话"></a>1.24记录交互式的mysql回话</h6><p>问题： 想保留一份在mysql会话中所做事情的记录<br>解决方案：创建一个tee文件<br>指定记录会话的文件名：<br>% mysql  –tee = tmp.out cookbook<br>如果只想记录会话的某个特定部分就很有用：<br>mysql&gt; \T tem.out<br>Logging to file ‘tem.out’<br>mysql&gt; \t<br>Outfile disabled.</p>
<p>tem 文件包含你所输入的语句，以及这些语句的输出，所以它是一个保存完整记录的便捷方法。</p>
<h6 id="1-25-以之前执行的语句创建mysql脚本"><a href="#1-25-以之前执行的语句创建mysql脚本" class="headerlink" title="1.25 以之前执行的语句创建mysql脚本"></a>1.25 以之前执行的语句创建mysql脚本</h6><h6 id="1-26-在SQL-语句中使用用户自定义的变量"><a href="#1-26-在SQL-语句中使用用户自定义的变量" class="headerlink" title="1.26 在SQL 语句中使用用户自定义的变量"></a>1.26 在SQL 语句中使用用户自定义的变量</h6><h6 id="1-27-为查询输出行计数"><a href="#1-27-为查询输出行计数" class="headerlink" title="1.27 为查询输出行计数"></a>1.27 为查询输出行计数</h6><p>记录查询结果的行数<br>对mysql的输出进行处理或者使用用户定义的变量<br>    •    % mysql –skip-column-names -e “SELECT thing, arms FROM limbs “ cookbook;<br>➜  MysqlFile mysql cookbook  –skip-column-names -e “select thing, arms FROM limbs” | cat -n<br>     1 human 2<br>     2 insect 0<br>     3 squid 10<br>     4 fish 0<br>     5 centipede 0<br>     6 table 0<br>     7 armchair 2<br>     8 phonograph 1<br>     9 tripod 0<br>    10 Peg Leg Pete 2<br>    11 space alien NULL</p>
<pre><code>•    SELECT @n := @n + 1 AS rownum, thing, arms, legs FROM limbs;
</code></pre><p>mysql&gt; SELECT @n := @n + 1 AS rownum, thing, arms, legs FROM limbs;<br>+——–+————–+——+——+<br>| rownum | thing        | arms | legs |<br>+——–+————–+——+——+<br>|      1 | human        |    2 |    2 |<br>|      2 | insect       |    0 |    6 |<br>|      3 | squid        |   10 |    0 |<br>|      4 | fish         |    0 |    0 |<br>|      5 | centipede    |    0 |  100 |<br>|      6 | table        |    0 |    4 |<br>|      7 | armchair     |    2 |    4 |<br>|      8 | phonograph   |    1 |    0 |<br>|      9 | tripod       |    0 |    3 |<br>|     10 | Peg Leg Pete |    2 |    1 |<br>|     11 | space alien  | NULL | NULL |<br>+——–+————–+——+——+<br>11 rows in set (0.01 sec)</p>
<h6 id="1-28-将mysql用作计算器"><a href="#1-28-将mysql用作计算器" class="headerlink" title="1.28 将mysql用作计算器"></a>1.28 将mysql用作计算器</h6><p>将mysql用作计算器。MySQL并不要求每个SELECT语句都关联某个表，所以你可以选择任意表达式的结果</p>
<h6 id="1-29-在Shell脚本中使用mysql"><a href="#1-29-在Shell脚本中使用mysql" class="headerlink" title="1.29 在Shell脚本中使用mysql"></a>1.29 在Shell脚本中使用mysql</h6><p>你想在一个shell脚本中调用mysql而不是交互式地使用它<br>-#!/bin/sh<br>-# mysql_uptime2.sh  报道服务器运行时间<br>mysql -e STATUS | grep “^Uptime”</p>
<p>结果如下：<br> MysqlFile ./mysql_uptime2.sh<br>Uptime: 27 min 50 sec</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/25/MySQL_3_2_使用Mysql客户端/" data-id="cjgu71mh70007gejrg87wzo3l" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      

    </footer>
  </div>
  
</article>



  
    <article id="post-MySQL_3_1_基于客户端编程" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/22/MySQL_3_1_基于客户端编程/">MySQL_3_1基于客户端编程</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/02/22/MySQL_3_1_基于客户端编程/" class="article-date"><time datetime="2018-02-22T14:40:22.000Z" itemprop="datePublished">2018-02-22</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>MySQL数据库使用以mysqld服务器为中心的客户端——服务器架构。服务器是事实操作数据库的程序。客户端程序并不直接操作服务器。相反，它们使用SQL语句来向服务器传达你的意图。客户端程序被安装在你想访问MySQL的本地机器上，但服务器可以安装在任何地方，只要客户端能连接上。MySQL生来就是网络数据库系统，所以客户端能够和运行本机或任何其他机器上的服务器进行通信。可能因为多个不同目的而写出一些客户端，但每个客户端和服务器的交互都是先连接服务器，发送SQL语句到服务器来执行数据库操作，然后从服务器接收语句执行结果。</p>
<p>这其中的一个客户端就包含在MySQL发布包中mysql程序。当交互使用时，mysql提示你输入一条语句，将其发送到MySQL服务器执行，然后显示结果。此项功能使mysql很有用，而且在你进行MySQL编程活动时也是一个颇有价值的工具，它可以你用script访问时帮你很方便地快速查看表结构等等。</p>
<p>本章描述了mysql 的功能以便你能更高效地使用它。<br>    • 启动、停止mysql<br>    • 指定连接参数，使用可选择的文件<br>    • 设定你的PATH变量以便命令解释器能够找到mysql（以及其他MySQL程序）<br>    • 交互执行SQL语句，使用批量文件<br>    • 取消和编辑语句<br>    • 控制mysql输出格式</p>
<p>本章前两节描述如何用mysql配置这些。作为示范目的，示例假设按照如下方式使用MySQL：<br>    • MySQL服务器运行在本机<br>    • MySQL用户名和密码分别为causer 和cbpass<br>    • 数据库名为cookbook</p>
<h1 id="1-1-建立MySQL用户账户"><a href="#1-1-建立MySQL用户账户" class="headerlink" title="1.1 建立MySQL用户账户"></a>1.1 建立MySQL用户账户</h1><p>使用GRANT语句建立MySQL用户账户，然后账户的名字和密码与服务器建立连接，使用mysql客户端前需要启动相应服务。<br>% mysql -h localhost -p -u root<br>连接到MySQL服务器需要一个用户名和密码，你还可以指定服务器正运行的主机名称。如果你没有指定主机名，mysql会假定服务器运行在本机上。<br>mysql的参数包括<br>-h localhost  表示连接到运行于本机的MySQL服务器；<br>-p 用于告知mysql要提示输入密码，<br>-u root 表示作为MySQL的root用户连接</p>
<p>mysql&gt; GRANT  ALL ON cookbook.* TO ‘cbuser’@’localhost’ IDENTIFIED BY ‘cbpass’;</p>
<p>% mysql -h localhost -p -u cbuser</p>
<h1 id="1-2-创建数据库和样表"><a href="#1-2-创建数据库和样表" class="headerlink" title="1.2 创建数据库和样表"></a>1.2 创建数据库和样表</h1><p>解决方案<br>使用 create database语句创建数据库，create table 语句创建你想用的每个表，用INSERT语句向表中添加数据行。</p>
<p>创建数据库：<br>mysql&gt; create database cookbook;</p>
<p>创建表：<br>首先将cookbook选定默认的数据库：<br>mysql&gt; USE cookbook;</p>
<h1 id="1-3-启动和停止mysql"><a href="#1-3-启动和停止mysql" class="headerlink" title="1.3 启动和停止mysql"></a>1.3 启动和停止mysql</h1><hr>
<p>mysqld start<br>mysql.server start    # 1. 启动<br>mysql.server stop     # 2. 停止</p>
<h2 id="mysql-server-restart-3-重启"><a href="#mysql-server-restart-3-重启" class="headerlink" title="mysql.server restart  # 3. 重启"></a>mysql.server restart  # 3. 重启</h2><p>中止mysql回话： quit</p>
<h1 id="1-4-使用可选项文件来指定连接参数"><a href="#1-4-使用可选项文件来指定连接参数" class="headerlink" title="1.4 使用可选项文件来指定连接参数"></a>1.4 使用可选项文件来指定连接参数</h1><p>通过设置选项文件my.cnf,使用默认用户登录，<br>配置教程<br><a href="http://blog.neten.de/posts/2014/01/27/install-mysql-using-homebrew/" target="_blank" rel="external">http://blog.neten.de/posts/2014/01/27/install-mysql-using-homebrew/</a><br>模板下载链接<br><a href="http://blog.neten.de/attachment/code/mysql/my.cnf.txt" target="_blank" rel="external">http://blog.neten.de/attachment/code/mysql/my.cnf.txt</a></p>
<h1 id="1-5-保护选项文件以阻止其他用户读取"><a href="#1-5-保护选项文件以阻止其他用户读取" class="headerlink" title="1.5 保护选项文件以阻止其他用户读取"></a>1.5 保护选项文件以阻止其他用户读取</h1><h1 id="1-6-混合使用命令行和选项文件参数"><a href="#1-6-混合使用命令行和选项文件参数" class="headerlink" title="1.6 混合使用命令行和选项文件参数"></a>1.6 混合使用命令行和选项文件参数</h1><h1 id="1-7-找不到mysql时该怎么做"><a href="#1-7-找不到mysql时该怎么做" class="headerlink" title="1.7 找不到mysql时该怎么做"></a>1.7 找不到mysql时该怎么做</h1><h1 id="1-8-发起SQL语句"><a href="#1-8-发起SQL语句" class="headerlink" title="1.8 发起SQL语句"></a>1.8 发起SQL语句</h1><p>分号是最普遍的终结符，但你也可以使用\g （‘go’）</p>
<h1 id="1-9-取消一部分输入的语句"><a href="#1-9-取消一部分输入的语句" class="headerlink" title="1.9 取消一部分输入的语句"></a>1.9 取消一部分输入的语句</h1><p>一开始输入一条语句，但最终决定不执行它，使用你的行删除符或者\c来取消语句<br>mysql&gt; select *<br>    -&gt; from limbs<br>    -&gt; prig\c<br>mysql&gt;</p>
<h1 id="1-10-重复和编辑SQL语句"><a href="#1-10-重复和编辑SQL语句" class="headerlink" title="1.10 重复和编辑SQL语句"></a>1.10 重复和编辑SQL语句</h1><p>如果输入的语句包含一个错误，使用mysql内建的输入行编辑能力。</p>
<h1 id="1-11-自动完成数据库和表名"><a href="#1-11-自动完成数据库和表名" class="headerlink" title="1.11 自动完成数据库和表名"></a>1.11 自动完成数据库和表名</h1><p>使用mysql的名称自动完成工具，输入部分的数据库，然后按下Tab键</p>
<h1 id="1-12-让mysql从文件中读取文件"><a href="#1-12-让mysql从文件中读取文件" class="headerlink" title="1.12 让mysql从文件中读取文件"></a>1.12 让mysql从文件中读取文件</h1><p>问题：你需要mysql从文件中读取语句以避免手工输入它们<br>解决方案：重定向mysql的输入，或者用source命令</p>
<h1 id="1-13-让mysql从其他程序读取语句"><a href="#1-13-让mysql从其他程序读取语句" class="headerlink" title="1.13 让mysql从其他程序读取语句"></a>1.13 让mysql从其他程序读取语句</h1><p>问题：以另一个程序的输出作为mysql的输入<br>解决方案： 使用 pipe（管道）<br>展示mysql如何从文件中读取SQL语句：<br>% mysql cookbook &lt; limbs.sql</p>
<h1 id="1-14-一行输入所有SQL"><a href="#1-14-一行输入所有SQL" class="headerlink" title="1.14 一行输入所有SQL"></a>1.14 一行输入所有SQL</h1><p>直接在mysql命令行中指定要执行的语句，mysql能从其参数列表中读取语句，<br>例如：查出limbs表中有多少行，运行一下命令：<br>$ mysql -e “select count(*) from limbs” cookbook</p>
<p>要用此方式执行多条语句，以分号分隔即可：<br>$ mysql -e “select count(*) from limbs; select now()” cookbook</p>
<h1 id="1-15-使用拷贝粘贴作为mysql输入源"><a href="#1-15-使用拷贝粘贴作为mysql输入源" class="headerlink" title="1.15 使用拷贝粘贴作为mysql输入源"></a>1.15 使用拷贝粘贴作为mysql输入源</h1><p>问题：你想利用你的图形用户界面（GUI）使mysql更易于使用。<br>解决方案：使用拷贝粘贴为mysql提供要执行的语句，这样就能利用你GUI能力为mysql展现的终端接口提供补充。<br>讨论：在Window环境下，拷贝粘贴非常有用，它能帮你一次运行多个程序并在它们之间传输信息。如果你在一个视窗打开包含语句的文档，你可以从那里拷贝语句然后将它们粘贴进你正运行mysql的视窗中。这和你自己手工输入语句并无二致，只是更快了，对于你频繁发出的语句，保持他们在一个独立的窗口中是一个很好的方法，这样就能确保他们总是触手可及。</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/22/MySQL_3_1_基于客户端编程/" data-id="cjgu71mh40005gejrge2ld14p" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-MySQL_2_2_内容摘要" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/20/MySQL_2_2_内容摘要/">MySQL_2_2_内容摘要</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/02/20/MySQL_2_2_内容摘要/" class="article-date"><time datetime="2018-02-20T08:49:51.000Z" itemprop="datePublished">2018-02-20</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>本书的读者对象<br>本书对于任何想使用Mysql的人都有用，从想使用数据库来为Blog或Wiki等个人项目服务的个人用户到专业数据库和web开发者。<br>内容摘要<br>使用本书的另一个方法就是脑海里不带着任何特定问题通读它。同样能给你以帮助，因为你会深入地理解Mysql能做什么，所以我建议你能偶尔翻阅本书。<br>第1章<br>使用Mysql应用程序，描述如何使用标准的Mysql命令行客户端，通常是人们所使用的第一或主要的Mysql接口，所以了解如何使用它的功能相当重要。使用该程序你的可以交互地发起查询并查看其结果，所以适合快速试验。<br>第2章<br>编写基于Mysql的程序，阐述Mysql编程的基本要素：如何连接服务器，发起查询，取回结果，以及处理错误。它还讨论在查询中如何处理特殊字符和NULL值；如何编写库文件来封装公共操作代码，描述收集构造服务器连接所需参数的不同方法。<br>第3章<br>从表中查询数据，涵盖了SELECT语句的多个方面，而select语句是从Mysql服务器查询数据的主要手段：指定你想检索的列和行，进行比较，处理NULL值，以及选中查询结果的某个区域。<br>第4章<br>表管理，包括表克隆，将结果集拷贝到其他表，使用临时表，以及检查或改变某个表的存储引擎等。<br>第5章<br>描述如何处理字符串数据。它涵盖字符集和字符序、字符串比较、处理大小写敏感问题、模式匹配、分解和组合字符串，以及执行FULLTEXT搜索。<br>第6章<br>使用日期和时间，揭示如何使用时间相关的数据。描述Mysql的日期格式以及如何以其他格式来显示日期值。它还包括如何使用Mysql特定的TIMESTAMP数据类型，如何设置时区，如何在不同时间单位进行转换，如何执行日期算数操作来计算时间间隔或者从一个日期来生成另一个日期，以及闰年计算等。<br>第7章<br>排序查询结果，描述如何以你想要的顺序放置查询结果行。包括指定排序方向，处理NULL值，解决字符串大小写敏感问题，以及根据日期或部分列值排序问题。如何对特定类型的值进行排序，例如域名、IP、ENUM（枚举）值。<br>第8章<br>生成摘要，阐述用于评估一系列数的一般性特征的技术，例如某个数据值是多少或者它的最小值、最大值或平均值是多少。<br>第9章<br>获取和使用原数据，讨论如何获取查询返回数据的信息，例如结果集的行数和列数，或者每列的名称和类型。它还揭示如何询问Mysql那些数据库和表可用，或者查明表结构。<br>第10章<br>数据导入导出，描述如何在Mysql和其他程序间传输信息。这包括将文件转换成另一种，去除或重排数据文件中的列，检查并检验数据，改写如日期类型等常以多种格式出现的值，以及当你用LOAD DATA将数值载入Mysql中时如何确定如何确定哪些数值会导致问题。<br>第11章<br>生成和使用序列，讨论AUTO_INCREMENT列，Mysql生成序列号的机制，它揭示了如何生成新的序列值或如何确定最新值，如何重新排一列，如何在一个定值开始序列，以及如何建立一个表使它能同时维护多个序列值。揭示如何使用AUTO_INCREMENT值来维护表间的主从关系，包括一些需要避免的陷阱。<br>第12章<br>使用多重表，揭示了如何执行连接，是一种，将一个表的行和其他表的行联合起来的操作，比较表之间匹配与不匹配之处，如何生成主从列表和摘要，列举多对多关系，以及基于另一个表的内容来更新或删除一表中的行。<br>第13章<br>统计技术，如何生成描述性的统计表、频率分布、回归以及相关性。它还包括如何随机化一组行或从组中随机选取一行。<br>第14章<br>处理充分行，讨论如何识别、计算并移除重复行——如何避免它们的发生<br>第15章<br>执行事务，揭示如何处理必须作为一个单位一直执行的多条SQL语句，探讨如何控制Mysql的自动提交模式，以及如何提交或回滚事务，并阐述了一些能用非事务性的存储引擎的背景知识。<br>第16章<br>使用存储的程序、触发器和事件，描述了如何编写存储在服务器的存储函数和存储过程，当表被修改时激活的触发器，以及在预定的情况下执行的事件。<br>第17章<br>关于web中的介绍，让你可以着手编写基于Web的Mysql脚本。Web编程使你能从数据库内容生成动态页面或者收集信息存入你的数据库。如何配置Apache来运行Perl、Ruby、PHP和Python脚本，以及如何配置Tomcat使其运行用JSP标签写的Java脚本。<br>第18章<br>在Web页面中混合查询结果，如何使用查询结果生成不同类型的HTML结构，诸如段落、列表、表格、超链接和导航索引等。如何向Mysql中存储图片，以及以后怎么检索并显示它们，以及如何发送一份可下载的结果集到一个浏览器。如何使用模版包生成Web页面。<br>第19章<br>用Mysql处理Web输入，讨论如何获取Web上的用户输入并用它来创建新的数据库行或者作为执行查询的基础。主要负责表单处理，包括如何基于你的数据库中包含的信息创建表单元素，例如单选按钮、弹出菜单，或者复选框<br>第20章<br>使用基于Mysql的会话管理，描写如何编写能记住跨越多个请求的信息的Web应用，使用Mysql作为后端的存储。特别是在你想逐步收集信息或你需要基于用户先前的动作作出<br>决定时。</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/20/MySQL_2_2_内容摘要/" data-id="cjgu71mh20004gejrmewsfgjn" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-MySQL_2_1_序言" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/19/MySQL_2_1_序言/">MySQL_2_1序言</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/02/19/MySQL_2_1_序言/" class="article-date"><time datetime="2018-02-19T15:30:06.000Z" itemprop="datePublished">2018-02-19</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>1.0 序言<br>你可以次从本书学的其他知识包括：<br>    · 如何使用SQL查询、排序和统计行<br>    · 如何发现两表之间匹配或不匹配的行<br>    · 如何执行一次事务<br>    · 如何计算日期或时间的间隔，包括计算年龄<br>    · 如何识别或移除重复行<br>    · 如何将图片存入Mysql并在网页中查询出来以供显示<br>    · 如何合理使用LOAD DATA 读取你的数据文件或者查明文件里的哪些值不正确<br>    · 如何使用strict模式来阻止错误数据进入你的数据库中<br>    · 如何将一个表或者一个数据库拷贝到另一个服务器<br>    · 如何生成序列值以用作唯一的行标识符<br>    · 如何编写存储过程和函数<br>    · 如何将视图用在“虚拟表”<br>    · 如何设置触发器，使其在你插入或更新表行时被激活来执行特定的数据处理操作<br>    · 如何创建按照计划执行的数据库事件<br>了解如何使用Mysql的其中一个方面是理解怎么和服务器进行通信，也就是如何使用SQL格式化查询语言。因此本书的一个重点就是使用SQL来阐明回答特定类型问题的查询。学习使用SQL的一个有用工具是包含在Mysql发行包中的mysql客户端。<br>但仅仅发挥SQL查询能力还不够，从数据库中获取的信息需要进一步处理或者以特定的方式展现。如果有复杂相互关系的查询时，譬如你将一次查询的结果作为其他查询的基础时该怎么办？ 或者你需要生成特定格式需求的报表时该怎么办？这些问题将我们带到本书的另一个重点上——如何通过应用程序接口（API）来编写和Mysql服务器交互的程序。当你了解如何在编程语言的上下文中使用Mysql时，你就获得如以下方式开发Mysql潜力的能力：<br>    · 记住某次查询的结果，并在以后的某个时刻使用它<br>    · 充分发挥通用编程语言的功能。这就使你可以基于查询的成功或失败，或者基于返回行的内容作出决定，然后采取行动<br>    · 随心所欲地格式化并显示查询的结果，如果你正在编写一个命令行脚本，你可以生成普通文本；如果是一个基于Web的脚本，你同样可以生成一个HTML表格，如果它是一个提取信息用于传输到其他系统的应用，你可以生成一个XML形式的数据文件<br>1.1</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/19/MySQL_2_1_序言/" data-id="cjgu71mh10003gejrfqefueq2" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-学习使用rails 脚手架搭建web应用" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/12/学习使用rails 脚手架搭建web应用/">(no title)</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/01/12/学习使用rails 脚手架搭建web应用/" class="article-date"><time datetime="2018-01-12T15:18:31.100Z" itemprop="datePublished">2018-01-12</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>—06/28/2017进度更新 —-</p>
<h2 id="更改名称Heroku-rename-pingl-sample-777"><a href="#更改名称Heroku-rename-pingl-sample-777" class="headerlink" title="更改名称Heroku rename pingl-sample-777"></a>更改名称Heroku rename pingl-sample-777</h2><p>使用 HTML5 可以定义一个包括徽标、页头、页脚和主体内容的网站布局；</p>
<p>为了用起来方便，可以使用 Rails 局部视图把部分结构放到单独的文件中；</p>
<p>在 CSS 中可以使用类和 ID 编写样式；</p>
<p>Bootstrap 框架能快速实现设计精美的网站；</p>
<p>使用 Sass 和 Asset Pipeline 能去除 CSS 中的重复，还能打包静态资源文件，提高在生产环境中的使用效率；</p>
<p>在 Rails 中可以自己定义路由规则，得到具名路由；</p>
<h2 id="集成测试能高效模拟浏览器中的点击操作。"><a href="#集成测试能高效模拟浏览器中的点击操作。" class="headerlink" title="集成测试能高效模拟浏览器中的点击操作。"></a>集成测试能高效模拟浏览器中的点击操作。</h2><p>添加了集成测试框架： rails-test-integration</p>
<p>我们在布局中加入了几个链接，最好再编写一些测试，确保链接正常。我们可以在浏览器中手动测试，先访问首页，然后点击其他链接，不过这么做很快就会变得繁琐。所以我们要使用集成测试，编写端到端测试完成这些操作。首先，生成测试模板，名为 site_layout：</p>
<p>针对布局中链接的测试，要检查网站的 HTML 结构，步骤如下：</p>
<p>访问根路径（首页）；</p>
<p>确认使用正确的模板渲染；</p>
<p>检查指向首页、“帮助”页面、“关于”页面和“联系”页面的地址是否正确。</p>
<p>$ rails test:integration //只执行集成测试，green后<br>$ rails test</p>
<hr>
<p>学习有好多天了，中间有几个地方卡住了，不过总算是搞清楚为什么，也解决了问题，总体来说还是顺利的。今天回顾下过程，以及记录遇到的问题及解决办法。</p>
<p>刚开始接触rails ，还好找到一个非常实用的教程，首先搭建推荐环境。</p>
<p>— 编译器Atom 、版本控制git、脚手架rails、云服务Heroku</p>
<p>案例中通过创建类似微博等功能来讲解如何使用rails，介绍了MVC模型，转移数据库提供给线上使用，</p>
<p>创建应用</p>
<p>绑定git方便版本控制，</p>
<p>使用 git remote -v 查看当前应用的git使用地址，是否和线上环境一致。</p>
<p>rails console 控制台命令交互，创建数据表逻辑，</p>
<p> Heroku账号，</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/12/学习使用rails 脚手架搭建web应用/" data-id="cjgu71mho000rgejr1tpnwtuf" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/12/hello-world/">Hello World</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/01/12/hello-world/" class="article-date"><time datetime="2018-01-12T15:18:31.099Z" itemprop="datePublished">2018-01-12</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/12/hello-world/" data-id="cjgu71mhj000lgejrtu3pv07l" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      

    </footer>
  </div>
  
</article>



  
    <article id="post-获取Youtube视频高清封面" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/07/获取Youtube视频高清封面/">获取Youtube视频高清封面</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/01/07/获取Youtube视频高清封面/" class="article-date"><time datetime="2018-01-07T10:11:37.000Z" itemprop="datePublished">2018-01-07</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>大家在Youtube上顺利搬砖之后会遇到一个问题，例如缺少该视频精美的封面,国外的视频制作人都会在封面上制作有趣并且符合视频内容的图片。今天就遇到这个需求，方法也是参考网络众多大牛的，我再重新画个轮子。具体操作如下。</p>
</blockquote>
<p>准备工具<br>1、梯子<br>2、Google chrome</p>
<h1 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h1><p>进入Youtube搜索页<br>在输入框输入番号，例如：Lady Gaga - Million Reasons<br>如图1<br><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fn88ijik8uj31kw0kedst.jpg" alt=""></p>
<h1 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h1><p>第一个便是我想要的封面<br>右键，点击“显示网页源代码”，进入后<br>command + f，在搜索框内输入 “JPG”，回车键后自动定位到图片链接上<br>具体的链接是你搜索主页搜索后显示的顺序为准，<br>例如我搜索后加载后显示位置在第一条，该图片源码里也是第一条。<br>如图2<br><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fn88iqo02wj31kw0yh7lq.jpg" alt=""></p>
<h1 id="Step3"><a href="#Step3" class="headerlink" title="Step3"></a>Step3</h1><p>点击该链接后页面将显示封面，此时的图片是缩略图，还不符合我们高清的图片。<br>接着在地址栏现有链接里更改一个英文单词:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hqdefault.jpp</div><div class="line">changes to</div><div class="line">maxresdefault.jpg</div></pre></td></tr></table></figure></p>
<p>改完后回车，链接将重新加载，得到高清原图，<br>如图3<br><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fn88ipek4dj31kw0v9e81.jpg" alt=""><br>最后右键将图片存储到本地，就完成整个获取过程。</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/07/获取Youtube视频高清封面/" data-id="cjgu71mhp000ugejrqokbmvmz" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Chrome/">Chrome</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Youtube/">Youtube</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-如何解决Mac版关于python3-5-X的Tcl-Tk-8-5-9-的警告？" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/24/如何解决Mac版关于python3-5-X的Tcl-Tk-8-5-9-的警告？/">如何解决Mac版关于python3.5.X的Tcl/Tk (8.5.9) 的警告？</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2017/12/24/如何解决Mac版关于python3-5-X的Tcl-Tk-8-5-9-的警告？/" class="article-date"><time datetime="2017-12-24T02:47:07.000Z" itemprop="datePublished">2017-12-24</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h4><blockquote>
<p>WARNING: The version of Tcl/Tk (8.5.9) in use may be unstable. Visit <a href="http://www.python.org/download/mac/tcltk/" target="_blank" rel="external">http://www.python.org/download/mac/tcltk/</a> for current information. - </p>
</blockquote>
<h4 id="分析：这个警告导致无法在IDLE编辑器上输入中文"><a href="#分析：这个警告导致无法在IDLE编辑器上输入中文" class="headerlink" title="分析：这个警告导致无法在IDLE编辑器上输入中文"></a>分析：这个警告导致无法在IDLE编辑器上输入中文</h4><h4 id="解决办法：指示安装相应的Tk版本-如-：-8-5-18"><a href="#解决办法：指示安装相应的Tk版本-如-：-8-5-18" class="headerlink" title="解决办法：指示安装相应的Tk版本 如 ： 8.5.18"></a>解决办法：指示安装相应的Tk版本 如 ： 8.5.18</h4><p>下载地址：<a href="http://downloads.activestate.com/ActiveTcl/releases/8.5.18.0/ActiveTcl8.5.18.0.298892-macosx10.5-i386-x86_64-threaded.dmg" target="_blank" rel="external">Download and Install Tcl: ActiveTcl</a><br>在国内下载速度过慢直接百度网盘下载<a href="https://pan.baidu.com/s/1geUPMcr" target="_blank" rel="external">ActiveTcl8.5.18.0.298892-macosx10.5-i386-x86_64-threaded.dmg</a>，原文件下载时间 2017-12-24 12:00</p>
<h4 id="结果：警告消失，可以在IDLE里直接输入中文字体。"><a href="#结果：警告消失，可以在IDLE里直接输入中文字体。" class="headerlink" title="结果：警告消失，可以在IDLE里直接输入中文字体。"></a>结果：警告消失，可以在IDLE里直接输入中文字体。</h4><p>如图<br><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fmrqke4mmoj30xk0f2acz.jpg" alt=""></p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/12/24/如何解决Mac版关于python3-5-X的Tcl-Tk-8-5-9-的警告？/" data-id="cjgu71mhk000ngejrbl6olt3q" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IDLE/">IDLE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tcl-Tk/">Tcl/Tk</a></li></ul>


    </footer>
  </div>
  
</article>



  


  <div id="page-nav">
    <nav><ul class="pagination"><li class="disabled"><span class="page-prev"><i class="fa fa-chevron-left"></i> Prev</a></li><li class="active"><span class="page-number">1</span></li><li><a class="page-number" href="/page/2/">2</a></li><li><a class="page-next" rel="next" href="/page/2/">Next <i class="fa fa-chevron-right"></i></a></li></ul></nav>
  </div>



        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  <div class="sidebar-module sidebar-module-inset">
  <h4>About</h4>
  <p>Etiam porta <em>sem malesuada magna</em> mollis euismod. Cras mattis consectetur purus sit amet fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>

<<<<<<< HEAD
          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/pingL/" target="_blank" title="基站">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  基站
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/zhaohengyi123" target="_blank" title="脸书">
                  
                    <i class="fa fa-fw fa-facebook"></i>
                  
                  脸书
                </a>
              </span>
            
<<<<<<< HEAD
              <span class="links-of-author-item">
                <a href="http://i.youku.com/ambitiouscat?spm=a2hzp.8244740.0.0" target="_blank" title="优酷">
                  
<<<<<<< HEAD
                    <i class="fa fa-fw fa-youtube"></i>
=======
                    <i class="fa fa-fw fa-youku"></i>
>>>>>>> 277b78ca82f625dcdc2c164771cba7e2a684d210
                  
                  优酷
                </a>
              </span>
            
=======
>>>>>>> bc829cfa4ee39efd2d46d9e138fa94b137b68827
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">平林</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
=======
>>>>>>> 8ad81cc8238b7fe9dbab33bf086c413a14271088
</div>


  


  
  <div class="sidebar-module">
    <h4>Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Android/">Android</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Chrome/">Chrome</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Dialog/">Dialog</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/IDLE/">IDLE</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Python/">Python</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Rails/">Rails</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Tcl-Tk/">Tcl/Tk</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Youtube/">Youtube</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/bitbucket/">bitbucket</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/git/">git</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/heroku/">heroku</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mysql/">mysql</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/servelt-tomcat-IntelliJIdea/">servelt tomcat IntelliJIdea</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tag Cloud</h4>
    <p class="tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/Dialog/" style="font-size: 10px;">Dialog</a> <a href="/tags/IDLE/" style="font-size: 10px;">IDLE</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Rails/" style="font-size: 10px;">Rails</a> <a href="/tags/Tcl-Tk/" style="font-size: 10px;">Tcl/Tk</a> <a href="/tags/Youtube/" style="font-size: 10px;">Youtube</a> <a href="/tags/bitbucket/" style="font-size: 10px;">bitbucket</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/heroku/" style="font-size: 10px;">heroku</a> <a href="/tags/mysql/" style="font-size: 20px;">mysql</a> <a href="/tags/servelt-tomcat-IntelliJIdea/" style="font-size: 10px;">servelt tomcat IntelliJIdea</a>
    </p>
  </div>


  
  <div class="sidebar-module">
    <h4>Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/05/">May 2018</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/02/">February 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/01/">January 2018</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/12/">December 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/09/">September 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/07/">July 2017</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/06/">June 2017</a><span class="sidebar-module-list-count">3</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2018/05/06/MySQL_5_表管理/">MySQL_5_表管理</a>
        </li>
      
        <li>
          <a href="/2018/05/06/MySQL_4_从表中查询/">MySQL_4_从表中查询</a>
        </li>
      
        <li>
          <a href="/2018/02/25/MySQL_3_2_使用Mysql客户端/">MySQL_3_2_使用MySQL客户端</a>
        </li>
      
        <li>
          <a href="/2018/02/22/MySQL_3_1_基于客户端编程/">MySQL_3_1基于客户端编程</a>
        </li>
      
        <li>
          <a href="/2018/02/20/MySQL_2_2_内容摘要/">MySQL_2_2_内容摘要</a>
        </li>
      
    </ul>
  </div>



        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2018 平林<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/js/script.js"></script>

</body>
</html>
