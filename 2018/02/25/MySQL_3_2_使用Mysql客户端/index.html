<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>MysqlCookbook-使用Mysql客户端2-2 | 平林的平常</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.16 预防查询输出超出屏幕1.17 发送查询输出到文件或程序让mysql输出到其他地方而非屏幕，重定向mysql的输出，或者使用管道 % mysql cookbook &amp;lt; inputfile  &amp;gt; outputfile  1.18 选择表格或制表符定界的查询输出格式问题：当你想获得制表符定界的输出时，mysql却生成表格式的输出，或者相反，解决方案 ： 使用合适的命令选项来显示需要">
<meta property="og:type" content="article">
<meta property="og:title" content="MysqlCookbook-使用Mysql客户端2-2">
<meta property="og:url" content="http://yoursite.com/2018/02/25/MySQL_3_2_使用Mysql客户端/index.html">
<meta property="og:site_name" content="平林的平常">
<meta property="og:description" content="1.16 预防查询输出超出屏幕1.17 发送查询输出到文件或程序让mysql输出到其他地方而非屏幕，重定向mysql的输出，或者使用管道 % mysql cookbook &amp;lt; inputfile  &amp;gt; outputfile  1.18 选择表格或制表符定界的查询输出格式问题：当你想获得制表符定界的输出时，mysql却生成表格式的输出，或者相反，解决方案 ： 使用合适的命令选项来显示需要">
<meta property="og:updated_time" content="2018-02-25T08:37:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MysqlCookbook-使用Mysql客户端2-2">
<meta name="twitter:description" content="1.16 预防查询输出超出屏幕1.17 发送查询输出到文件或程序让mysql输出到其他地方而非屏幕，重定向mysql的输出，或者使用管道 % mysql cookbook &amp;lt; inputfile  &amp;gt; outputfile  1.18 选择表格或制表符定界的查询输出格式问题：当你想获得制表符定界的输出时，mysql却生成表格式的输出，或者相反，解决方案 ： 使用合适的命令选项来显示需要">
  
    <link rel="alternate" href="/atom.xml" title="平林的平常" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  

</head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/index.html">Home</a></li>
        
          <li><a class=""
                 href="/archives/">Archives</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">平林的平常</h1>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          <article id="post-MySQL_3_2_使用Mysql客户端" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 class="article-title" itemprop="name">
      MysqlCookbook-使用Mysql客户端2-2
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/02/25/MySQL_3_2_使用Mysql客户端/" class="article-date"><time datetime="2018-02-25T08:37:22.000Z" itemprop="datePublished">2018-02-25</time></a>
</div>

    
    

  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <h6 id="1-16-预防查询输出超出屏幕"><a href="#1-16-预防查询输出超出屏幕" class="headerlink" title="1.16 预防查询输出超出屏幕"></a>1.16 预防查询输出超出屏幕</h6><h6 id="1-17-发送查询输出到文件或程序"><a href="#1-17-发送查询输出到文件或程序" class="headerlink" title="1.17 发送查询输出到文件或程序"></a>1.17 发送查询输出到文件或程序</h6><p>让mysql输出到其他地方而非屏幕，重定向mysql的输出，或者使用管道</p>
<p>% mysql cookbook &lt; inputfile  &gt; outputfile </p>
<h6 id="1-18-选择表格或制表符定界的查询输出格式"><a href="#1-18-选择表格或制表符定界的查询输出格式" class="headerlink" title="1.18 选择表格或制表符定界的查询输出格式"></a>1.18 选择表格或制表符定界的查询输出格式</h6><p>问题：当你想获得制表符定界的输出时，mysql却生成表格式的输出，或者相反，<br>解决方案 ： 使用合适的命令选项来显示需要的格式<br>使用-t 或者（–table）选项来生成更具可读性的表格输出：<br>% mysql -t cookbook &lt; inputfile | lpr<br>% mysql -t cookbook &lt; inputfile | mail paul</p>
<p>反向操作是在交互模式下生成批量输出，达到这点使用-B（或–batch）</p>
<h6 id="1-19-指定任意的输出列分隔符"><a href="#1-19-指定任意的输出列分隔符" class="headerlink" title="1.19 指定任意的输出列分隔符"></a>1.19 指定任意的输出列分隔符</h6><p>问题： 你想mysql使用除了制表符外的定界符来生成语句输出<br>解决方案：mysql 自身并未提供设置输出定界符的功能，但你可以对mysql输出进行加工来重新格式化。</p>
<h6 id="1-20-生成HTML或XML输出"><a href="#1-20-生成HTML或XML输出" class="headerlink" title="1.20 生成HTML或XML输出"></a>1.20 生成HTML或XML输出</h6><p>将查询结果转化成HTML或XML<br>使用 mysql -H 或 mysql -X</p>
<p>例如：<br>% mysql  -e “select <em> from limbs where legs=0” cookbook<br>% mysql -H -e “select </em> from limbs where legs=0” cookbook</p>
<h6 id="1-21-在查询输出中禁止列头部"><a href="#1-21-在查询输出中禁止列头部" class="headerlink" title="1.21 在查询输出中禁止列头部"></a>1.21 在查询输出中禁止列头部</h6><p>% mysql -e “select arms from limbs” cookbook | sumarize<br>要创建仅包含数据值的输出，就要  –skip-column-names 选项禁止列头部行：<br>% mysql  –skip-column-names -e “select arms from limbs” cookbook | sumarize<br>你也可通过两次指定“silent” 选项（-s 或 –silent）来达到和–skip-coumn-names 同等的效果：<br>% mysql -ss -e “select arms from limbs” cookbook | sumarize</p>
<h6 id="1-22-使长输出行更具可读性"><a href="#1-22-使长输出行更具可读性" class="headerlink" title="1.22 使长输出行更具可读性"></a>1.22 使长输出行更具可读性</h6><p>问题：当你的一个查询生成了很长的输出行，它杂乱无章的出现在你的屏幕上<br>解决方案：使用垂直的输出格式<br>mysql&gt; show full columns from limbs;<br>+——-+————-+—————–+——+—–+———+——-+———————————+———+<br>| Field | Type        | Collation       | Null | Key | Default | Extra | Privileges                      | Comment |<br>+——-+————-+—————–+——+—–+———+——-+———————————+———+<br>| thing | varchar(20) | utf8_general_ci | YES  |     | NULL    |       | select,insert,update,references |         |<br>| legs  | int(11)     | NULL            | YES  |     | NULL    |       | select,insert,update,references |         |<br>| arms  | int(11)     | NULL            | YES  |     | NULL    |       | select,insert,update,references |         |<br>+——-+————-+—————–+——+—–+———+——-+———————————+———+</p>
<p>为避免此问题，将每列值显示在单独的一行来生成“垂直的”输出。通过\G 而不是用字符a；或\g 来终止一条语句来实现的。<br>用垂直格式输出样式：<br>mysql&gt; show full columns from limbs\G;<br><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong> 1. row <strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong><br>     Field: thing<br>      Type: varchar(20)<br> Collation: utf8_general_ci<br>      Null: YES<br>       Key:<br>   Default: NULL<br>     Extra:<br>Privileges: select,insert,update,references<br>   Comment:<br><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong> 2. row <strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong><br>     Field: legs<br>      Type: int(11)<br> Collation: NULL<br>      Null: YES<br>       Key:<br>   Default: NULL<br>     Extra:<br>Privileges: select,insert,update,references<br>   Comment:<br><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong> 3. row <strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong><br>     Field: arms<br>      Type: int(11)<br> Collation: NULL<br>      Null: YES<br>       Key:<br>   Default: NULL<br>     Extra:<br>Privileges: select,insert,update,references<br>   Comment:<br>3 rows in set (0.00 sec)</p>
<p>ERROR:<br>No query specified</p>
<h6 id="1-23控制mysql的繁冗级别"><a href="#1-23控制mysql的繁冗级别" class="headerlink" title="1.23控制mysql的繁冗级别"></a>1.23控制mysql的繁冗级别</h6><p>问题：你需要mysql产生更多的输出，或者相反<br>解决方案： 使用-v 或 -s 选项来获取更多或者更少<br>% echo “select now()” | mysql -v<br>% echo “select now()” | mysql -vv<br>% echo “select now()” | mysql -vvv<br>-v 和–verbose 相对的是 -s 和–silent ，它们也可以多次使用来达到叠加的效果</p>
<h6 id="1-24记录交互式的mysql回话"><a href="#1-24记录交互式的mysql回话" class="headerlink" title="1.24记录交互式的mysql回话"></a>1.24记录交互式的mysql回话</h6><p>问题： 想保留一份在mysql会话中所做事情的记录<br>解决方案：创建一个tee文件<br>指定记录会话的文件名：<br>% mysql  –tee = tmp.out cookbook<br>如果只想记录会话的某个特定部分就很有用：<br>mysql&gt; \T tem.out<br>Logging to file ‘tem.out’<br>mysql&gt; \t<br>Outfile disabled.</p>
<p>tem 文件包含你所输入的语句，以及这些语句的输出，所以它是一个保存完整记录的便捷方法。</p>
<h6 id="1-25-以之前执行的语句创建mysql脚本"><a href="#1-25-以之前执行的语句创建mysql脚本" class="headerlink" title="1.25 以之前执行的语句创建mysql脚本"></a>1.25 以之前执行的语句创建mysql脚本</h6><h6 id="1-26-在SQL-语句中使用用户自定义的变量"><a href="#1-26-在SQL-语句中使用用户自定义的变量" class="headerlink" title="1.26 在SQL 语句中使用用户自定义的变量"></a>1.26 在SQL 语句中使用用户自定义的变量</h6><h6 id="1-27-为查询输出行计数"><a href="#1-27-为查询输出行计数" class="headerlink" title="1.27 为查询输出行计数"></a>1.27 为查询输出行计数</h6><p>记录查询结果的行数<br>对mysql的输出进行处理或者使用用户定义的变量<br>    •    % mysql –skip-column-names -e “SELECT thing, arms FROM limbs “ cookbook;<br>➜  MysqlFile mysql cookbook  –skip-column-names -e “select thing, arms FROM limbs” | cat -n<br>     1 human 2<br>     2 insect 0<br>     3 squid 10<br>     4 fish 0<br>     5 centipede 0<br>     6 table 0<br>     7 armchair 2<br>     8 phonograph 1<br>     9 tripod 0<br>    10 Peg Leg Pete 2<br>    11 space alien NULL</p>
<pre><code>•    SELECT @n := @n + 1 AS rownum, thing, arms, legs FROM limbs;
</code></pre><p>mysql&gt; SELECT @n := @n + 1 AS rownum, thing, arms, legs FROM limbs;<br>+——–+————–+——+——+<br>| rownum | thing        | arms | legs |<br>+——–+————–+——+——+<br>|      1 | human        |    2 |    2 |<br>|      2 | insect       |    0 |    6 |<br>|      3 | squid        |   10 |    0 |<br>|      4 | fish         |    0 |    0 |<br>|      5 | centipede    |    0 |  100 |<br>|      6 | table        |    0 |    4 |<br>|      7 | armchair     |    2 |    4 |<br>|      8 | phonograph   |    1 |    0 |<br>|      9 | tripod       |    0 |    3 |<br>|     10 | Peg Leg Pete |    2 |    1 |<br>|     11 | space alien  | NULL | NULL |<br>+——–+————–+——+——+<br>11 rows in set (0.01 sec)</p>
<h6 id="1-28-将mysql用作计算器"><a href="#1-28-将mysql用作计算器" class="headerlink" title="1.28 将mysql用作计算器"></a>1.28 将mysql用作计算器</h6><p>将mysql用作计算器。MySQL并不要求每个SELECT语句都关联某个表，所以你可以选择任意表达式的结果</p>
<h6 id="1-29-在Shell脚本中使用mysql"><a href="#1-29-在Shell脚本中使用mysql" class="headerlink" title="1.29 在Shell脚本中使用mysql"></a>1.29 在Shell脚本中使用mysql</h6><p>你想在一个shell脚本中调用mysql而不是交互式地使用它<br>-#!/bin/sh<br>-# mysql_uptime2.sh  报道服务器运行时间<br>mysql -e STATUS | grep “^Uptime”</p>
<p>结果如下：<br> MysqlFile ./mysql_uptime2.sh<br>Uptime: 27 min 50 sec</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/25/MySQL_3_2_使用Mysql客户端/" data-id="cjgu6n59e00067ojrxyhwnb5l" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      

    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/2018/02/22/MySQL_3_1_基于客户端编程/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">MysqlCookbook_使用Mysql客户端1/2</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/2018/05/06/MySQL_4_从表中查询/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">MySQL_4_从表中查询.md</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>




        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  <div class="sidebar-module sidebar-module-inset">
  <h4>About</h4>
  <p>Etiam porta <em>sem malesuada magna</em> mollis euismod. Cras mattis consectetur purus sit amet fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>

</div>


  


  
  <div class="sidebar-module">
    <h4>Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mysql/">-mysql</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Android/">Android</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Chrome/">Chrome</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Dialog/">Dialog</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/IDLE/">IDLE</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Python/">Python</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Rails/">Rails</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Tcl-Tk/">Tcl/Tk</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Youtube/">Youtube</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/bitbucket/">bitbucket</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/git/">git</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/heroku/">heroku</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/mysql/">mysql</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/servelt-tomcat-IntelliJIdea/">servelt tomcat IntelliJIdea</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tag Cloud</h4>
    <p class="tagcloud">
      <a href="/tags/mysql/" style="font-size: 10px;">-mysql</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/Dialog/" style="font-size: 10px;">Dialog</a> <a href="/tags/IDLE/" style="font-size: 10px;">IDLE</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Rails/" style="font-size: 10px;">Rails</a> <a href="/tags/Tcl-Tk/" style="font-size: 10px;">Tcl/Tk</a> <a href="/tags/Youtube/" style="font-size: 10px;">Youtube</a> <a href="/tags/bitbucket/" style="font-size: 10px;">bitbucket</a> <a href="/tags/git/" style="font-size: 20px;">git</a> <a href="/tags/heroku/" style="font-size: 10px;">heroku</a> <a href="/tags/mysql/" style="font-size: 20px;">mysql</a> <a href="/tags/servelt-tomcat-IntelliJIdea/" style="font-size: 10px;">servelt tomcat IntelliJIdea</a>
    </p>
  </div>


  
  <div class="sidebar-module">
    <h4>Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/05/">May 2018</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/02/">February 2018</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/01/">January 2018</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/12/">December 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/09/">September 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/07/">July 2017</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/06/">June 2017</a><span class="sidebar-module-list-count">3</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2018/05/06/MySQL_5_表管理/">MySQL表管理</a>
        </li>
      
        <li>
          <a href="/2018/05/06/MySQL_4_从表中查询/">MySQL_4_从表中查询.md</a>
        </li>
      
        <li>
          <a href="/2018/02/25/MySQL_3_2_使用Mysql客户端/">MysqlCookbook-使用Mysql客户端2-2</a>
        </li>
      
        <li>
          <a href="/2018/02/22/MySQL_3_1_基于客户端编程/">MysqlCookbook_使用Mysql客户端1/2</a>
        </li>
      
        <li>
          <a href="/2018/02/20/MySQL_2_2_内容摘要/">Mysql cookbook 内容摘要</a>
        </li>
      
    </ul>
  </div>



        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2018 平林<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/js/script.js"></script>

</body>
</html>
